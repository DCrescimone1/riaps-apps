# Decentralized Remedial Action Scheme (RAS) for Underfrequency Load Shedding (UFLS)

This RAS-2 application uses average-consensus algorithm to realize the distributed underfrequency load shedding in the IEEE 14-bus system (in RTDS). For comparison, a conventional UFLS scheme is also implemented. It is demonstrated that the RAS2 application cuts a lower amount of load and stops the frequency decline faster in the contingency scenario.

@TODO:
1) Add comments to the code;
2) Implement the component DataRecorder;
3) Improve the code by using parameters for initializing the components and actors.
4) In this version, messages are used for sharing information as the distribution coordination (that includes the consensus) is being developed.

## Developers

-	Jing Xie - jing.xie6@wsu.edu
-	Shyam Gopal - shyam.gopal@wsu.edu
-	Xin Sun - x.sun@wsu.edu

## Installation & Configuration

1. RIAPS Platform & BBBs
For 1) Setting up the BBB images; and 2) Update RIAPS Platform Packages on Existing BBBs, please look at:
	https://github.com/RIAPS/riaps-integration/tree/master/riaps-bbbruntime#

2. Hardware used:
	1. 3 BBBs (Node 01, 02, and 03)
	2. RTDS
	3. 1 Router (TP-Link AC1750) 
		* For simplicity, the DHCP of this router is turned off for connecting with the RTDS network.
		* Thus, this router can be replaced by a switch.
		* An alternative way is to keep the DHCP of this router, and set up forwarding rules in the router for each RIAPS node with a specific port number.
		* The No.4 LAN port of this router is connected to the switch of RAS-1, for connecting with the RTDS network.

3. Network:
	- RTDS (IP: "192.168.1.102", Port: "7571 for Node 01, 7572 for Node 02, and 7573 for Node 03")
	- Node 01 (IP: "192.168.1.161") (Name: "bbb-c741") (MAC: "b0:d5:cc:f9:c7:41")
	- Node 02 (IP: "192.168.1.162") (Name: "bbb-2915") (MAC: "04:a3:16:b3:29:15")
	- Node 03 (IP: "192.168.1.163") (Name: "bbb-2a5b") (MAC: "04:a3:16:b3:2a:5b")
	- Router (LAN IP: "192.168.1.160" for configuration) (MAC: "18:A6:F7:26:01:3D")
	-------------------------------------------------------------------------------
	- Virtual Machine (IP "192.168.3.210") [-I enp0s3]
	- Host of Virtual Machine (IP "192.168.1.155") [-I enp8s0]

## Data Flow
For the CUFLS App, each node collects the frequency measurements from the RTDS.

## Test
To make sure the classes in the library work well, please run the test scripts first.
	
## Running the Application

<Describe how to start the application and what outcome is expected when running>

1. RTDS
    * Turn on RTDS
    * Open the modified IEEE 14-bus system
    * Run the system
    * Open the associated RTDS scripts for these three nodes
2. RIAPS
    * rpyc_register.py
    * riaps_ctrl
    * riaps_deplo -n 192.168.3.210 (for Virtual Machine)
    * riaps_deplo -n 192.168.1.161 (for Node 01)
    * riaps_deplo -n 192.168.1.162 (for Node 02)
    * riaps_deplo -n 192.168.1.163 (for Node 03)

## Backup
For cloning a Bootable Beaglebone Black SD Card, please refer to this:
http://ofitselfso.com/BeagleNotes/CloningABootableBeagleboneBlackSDCard.php

## Notes
1) The .json files are generated by the RIAPS platform. Therefore, they should not be checked in.
2) Each App can include multiple nodes. Each node can run several actors. And each actor can include a number of components.

## Issues
1) If the port 4222 is bound, the process must be identified (e.g., netstat -tulpn | grep 4222)
 and killed (e.g., kill -9 2686, where 2686 is the PID) before starting/runing the riaps_ctrl.

